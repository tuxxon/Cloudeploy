<beans xmlns="http://www.springframework.org/schema/beans"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:context="http://www.springframework.org/schema/context"  
xmlns:mongo="http://www.springframework.org/schema/data/mongo"  
xsi:schemaLocation=  
"http://www.springframework.org/schema/context  
http://www.springframework.org/schema/context/spring-context-3.1.xsd  
http://www.springframework.org/schema/data/mongo  
http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd  
http://www.springframework.org/schema/beans  
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd" >  
  
  
<!-- 引入资源文件 --> 
<context:property-placeholder location="test.mongo.properties"/>  
  
  
<!--MongoDB映射对象-->  
<mongo:mongo id="mongo" host="${mongo.host}" port="${mongo.port}">  
<mongo:options   
connections-per-host="${mongo.connectionsPerHost}"  
threads-allowed-to-block-for-connection-multiplier="${mongo.threadsAllowedToBlockForConnectionMultiplier}"  
connect-timeout="${mongo.connectTimeout}"  
max-wait-time="${mongo.maxWaitTime}"  
auto-connect-retry="${mongo.autoConnectRetry}"  
socket-timeout="${mongo.socketTimeout}"  
/>   
</mongo:mongo>  
  
  
<!--MongoDB工厂-->  
<mongo:db-factory dbname="${mongo.dbname}" mongo-ref="mongo"/>  
  
  
<!--MongoDB数据操作模板对象-->  
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">  
  <constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />  
</bean>  
  
  
<!--只在需要通过实现Spring Data 中Repositories及其子接口进行数据操作的情况下配置，Spring会自动为配置包路径下的接口创建代理实例-->  
<mongo:repositories base-package="cn.ac.iscas.cloudeploy.v2.model.dao" mongo-template-ref="mongoTemplate"/>  
</beans> 